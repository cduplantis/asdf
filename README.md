
Folder Structure
The folder structure is designed to provide isolation, clarity, and functionality for both clients and the batch process. Here’s the recommended hierarchy:

    Root Directory: The top-level directory containing all client-specific folders.
        Client Folder: A unique folder for each client, named based on their company name.
            Input: Subfolder where clients upload their data files.
            Output: Subfolder where clients view the output files generated by the process.
            Archive: Subfolder where input files are moved after processing.

For example:

Root_Directory/
├── Acme_Corp/
│   ├── Input/
│   ├── Output/
│   └── Archive/
├── Beta_Inc/
│   ├── Input/
│   ├── Output/
│   └── Archive/
└── Gamma_Ltd/
    ├── Input/
    ├── Output/
    └── Archive/

Naming Conventions
Client Folders

    Convention: Use the client’s company name, sanitized to ensure compatibility with file systems.
    Sanitization Rules:
        Replace spaces with underscores (e.g., "Acme Corp" becomes "Acme_Corp").
        Remove special characters except underscores and hyphens (e.g., "Acme@Corp!" becomes "Acme_Corp").
        Ensure uniqueness, treating names as case-insensitive to avoid conflicts (e.g., "Acme_Corp" and "acme_corp" are considered the same).
    Reasoning: Sanitized company names are user-friendly and recognizable to clients while avoiding issues with file system restrictions. If duplicate names occur (e.g., two clients named "Acme Corp"), append a unique identifier (e.g., "Acme_Corp_1") during onboarding to maintain uniqueness.
    Examples:
        "Acme Corp" → Acme_Corp
        "Beta Inc." → Beta_Inc
        "Gamma-Ltd" → Gamma_Ltd

Subfolders

    Input: Named exactly as "Input".
        Purpose: Clients upload their data files here.
    Output: Named exactly as "Output".
        Purpose: Contains the output files generated by the batch process for clients to view.
    Archive: Named exactly as "Archive".
        Purpose: Stores input files after processing to keep a record and keep the Input folder clean.
    Reasoning: Consistent, simple names ensure clarity and ease of use for both clients and the processing system.

File Names
Input Files

    Convention: Clients can choose any file name, provided it is unique within their Input folder.
    Guidance: Encourage clients to include meaningful identifiers (e.g., dates or types) if they upload multiple files, but no strict naming convention is enforced (e.g., "sales_data.csv", "inventory_2023-10-05.csv").
    Reasoning: Flexibility allows clients to use names that suit their workflows, while uniqueness within their folder prevents overwriting issues. The process will handle these files regardless of name.

Output Files

    Convention: Name output files by taking the input file name and appending "_result" before the extension.
    Examples:
        Input: sales_data.csv → Output: sales_data_result.csv
        Input: inventory_2023-10-05.xlsx → Output: inventory_2023-10-05_result.xlsx
    Reasoning: This maintains a clear link between input and output files, making it easy for clients to identify results. Since Input and Output are separate folders, naming conflicts are minimized even if a client uploads a file like "data_result.csv". The suffix "_result" is simple and unlikely to overlap with typical input file names.

Archive Files

    Convention: Retain the original input file name when moving it to the Archive folder after processing.
    Example:
        Input: sales_data.csv → Archive: sales_data.csv
    Reasoning: Keeping the original name preserves the file’s identity for record-keeping, and since it’s in a separate Archive folder, there’s no conflict with active inputs or outputs.

Workflow Example

    Client Upload: A client, "Acme Corp", uploads sales_2023-10-05.csv to Acme_Corp/Input/.
    Batch Process: The process detects the file, processes it, generates sales_2023-10-05_result.csv, and places it in Acme_Corp/Output/.
    Archiving: The original file sales_2023-10-05.csv is moved to Acme_Corp/Archive/.
    Client Access: The client logs in, sees only Acme_Corp/, and can upload new files to Input/ or download sales_2023-10-05_result.csv from Output/.

Access Control
To ensure each client only sees their own folder:

    Box/Dropbox: Configure shared folders with permissions so each client has access only to their specific folder (e.g., Acme_Corp/).
    SFTP: Set up chroot jails for each user, rooting them to their client folder (e.g., /path/to/Root_Directory/Acme_Corp/ becomes their root / upon login).
    This isolation mimics a chroot environment, meeting the requirement that clients only see their own contents.

Additional Considerations

    File Types: The structure assumes CSV files but can accommodate other formats (e.g., .xlsx, .json) as long as the process handles them and generates appropriate outputs.
    Output Accumulation: Over time, the Output folder may grow. Consider a cleanup policy (e.g., retain outputs for 30 days) if storage or clutter becomes an issue, but this can be implemented separately.
    Scalability: If a client needs multiple data types, subfolders like Input/TypeA/ can be added later without disrupting the core structure.

Summary of Naming Conventions

    Client Folders: Sanitized company names (e.g., Acme_Corp).
    Subfolders: Fixed names Input, Output, Archive.
    Input Files: Client-defined, unique names (e.g., sales_data.csv).
    Output Files: Input name + "_result" (e.g., sales_data_result.csv).
    Archive Files: Original input name unchanged.

This structure and naming convention provide a robust, user-friendly, and secure solution for your multi-client batch processing system across Box, Dropbox, and SFTP.
